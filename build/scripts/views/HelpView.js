define([],function(){var e=Backbone.View.extend({events:{"click .title":"onToggle"},className:"help-item",initialize:function(){_.bindAll(this),this.collection=this.options.collection,this.collection.on("item-toggle",this.onItemToggle),this.$container=this.options.$container,this.expand=!1,this.template=this.template=env==="web"?_.template($("#help-template").html()):templates.help_template,this.render()},render:function(){this.$el.html(this.template(this.model.toJSON())),this.$container.append(this.$el)},onToggle:function(){this.expand=!this.expand,this.expand?this.$el.find(".description").removeClass("hide").addClass("expand").siblings().addClass("expand"):this.$el.find(".description").addClass("hide").removeClass("expand").siblings().removeClass("expand"),this.collection.trigger("item-toggle",this.model)},onItemToggle:function(e){e!==this.model&&this.$el.find(".description").addClass("hide")}}),t=Backbone.View.extend({id:"help",className:"hide",events:{"click .close":"onToggle"},initialize:function(){_.bindAll(this),this.$container=this.options.$container,this.$container.after(this.$el),this.$el.prepend('<div class="close">&times</div>'),this.collection=this.options.collection,this.show=!1,this.render()},render:function(){var t=this;this.collection.each(function(n){new e({model:n,collection:t.collection,$container:t.$el})})},onToggle:function(){this.show?(this.$el.addClass("hide"),$(window).off("keydown",this.onKeydown)):(this.$el.removeClass("hide"),$(window).on("keydown",this.onKeydown)),this.show=!this.show},onKeydown:function(e){e.keyCode===27&&this.onToggle()}});return t});