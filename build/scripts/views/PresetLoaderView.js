define([],function(){var e=Backbone.View.extend({className:"preset",events:{click:"onLoad"},initialize:function(){this.template=env==="web"?_.template($("#preset-template").html()):templates.preset_template,this.render()},render:function(){this.$el.html(this.template(this.model.toJSON())),this.options.$container.append(this.$el)},onLoad:function(){this.options.collection.load(this.model)}}),t=Backbone.View.extend({id:"preset-loader",className:"hide",initialize:function(){_.bindAll(this),this.collection=this.options.collection,this.$container=this.options.$container,this.open=!1,this.$container.after(this.$el),this.collection.on("reset",this.render),this.collection.on("load",this.toggle),this.collection.on("add",this.render)},render:function(){var t=this;t.$el.html(""),this.collection.each(function(n){new e({model:n,$container:t.$el,collection:t.collection})})},toggle:function(){var e=this.open?"addClass":"removeClass";this.open?$(window).off("keydown",this.onKeydown):$(window).on("keydown",this.onKeydown),this.$el[e]("hide"),this.open=!this.open},onKeydown:function(e){e.keyCode===27&&this.toggle()}});return t});