define(["components/BaseNode","components/Gain"],function(e,t){var n=function(e){return typeof e!="undefined"},r=e.extend({init:function(){this._super.apply(this,arguments),this.route=0,this.routes=[],this.node=new t(this.context),this.setInputNode(this.node.getInputNode()),this.setOutputNode(this.node.getOutputNode())},addRouteTo:function(e,t){var r=this.routes.length;if(n(t))if(t>r){if(t-r>1)for(var i=1,s=t-r;i<s;i++)this.routes.push([]);this.routes.push([e])}else this.routes[t-1].push(e);else this.routes.push([e]);return this},removeRouteTo:function(e,t){if(n(e))if(n(t))this.routes[t-1]=_.without(this.routes[t-1],e);else for(var r=0,i=this.routes.length;r<i;r++)this.routes[r]=_.without(this.routes[r],e);else this.routes=[],this.route=0;return this},setRoute:function(e){return function(e,t,n){e._setRoute.apply(e,t),setTimeout(function(){e._setRoute.apply(e,t)},10)}(this,arguments,e),this},_setRoute:function(e){var t,n,r=this;e=parseInt(e);if(e>this.routes.length&&this.routes.length===0)return!1;this.disconnect();if(e!==0)for(n=0,_len=this.routes[e-1].length;n<_len;n++)t=this.routes[e-1][n],this.connect(t);this.route=e},setGain:function(){return this.node.setGain.apply(this.node,arguments),this}});return r});