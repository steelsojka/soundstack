define(["controllers/BaseController","controllers/MIDI"],function(e,t){var n={ATTACH_LISTENER:!0,BASE:{65:45,87:46,83:47,69:48,68:49,70:50,84:51,71:52,89:53,72:54,85:55,74:56,75:57,79:58,76:59}},r=e.extend({init:function(){this._super.apply(this,arguments),this.MIDI=new t,this.notes=n.BASE,this.buttonPressed=!1,n.ATTACH_LISTENER&&this.createListener()},convert:function(e){e===190?this.shiftOctaveUp():e===188?this.shiftOctaveDown():e in this.notes&&(this.MIDI.convert(this.notes[e]),this.emit("controller:note-on",this.notes[e]))},connect:function(e){this.MIDI.connect(e)},setType:function(e){this._type=e},shiftOctaveUp:function(){for(var e in this.notes)this.notes[e]+=12},shiftOctaveDown:function(){for(var e in this.notes)this.notes[e]-=12},createListener:function(){var e=this;window.addEventListener("keydown",function(t){e.buttonPressed||(e.convert(t.keyCode),e.buttonPressed=!0)}),window.addEventListener("keyup",function(t){e.emit("controller:note-off"),e.buttonPressed=!1})}});return r});