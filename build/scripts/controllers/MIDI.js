define(["controllers/BaseController"],function(e){var t=function(e){return typeof e!="undefined"},n=function(e,t,n){return Math.max(Math.min(n,t),e)},r=function(e,t,n){return n>=e&&n<=t},i={NOTES:["C ","C#","D ","D#","E ","F ","F#","G ","G#","A ","A#","B "],BASE_A4:440},s=e.extend({init:function(){this._super.apply(this,arguments),this.setType(this.Types.NOTE_TO_FREQUENCY)},noteToFrequency:function(e){return r(0,119,e)?i.BASE_A4*Math.pow(2,(e-69)/12):-1},noteToName:function(e){return r(0,119,e)?(i.NOTES[e%12]+Math.round(e/12).toString()).replace(/\s+/g,""):"---"},frequencyToNote:function(e){return Math.round(12*(Math.log(e/i.BASE_A4)/Math.log(2)))+69},nameToNote:function(e){var t,n,r,s;if(e.length===2)r=e[0]+" "+e[1];else if(e.length>2)return-1;r.toUpperCase(),t=-1;for(n=0,s=i.NOTES.length;n<s;n++)if(i.NOTES[n]===r[0]+r[1]){t=n;break}try{return n=parseInt(r[2],10),n*12+t}catch(o){return-1}if(t<0)return-1},convert:function(e){var t;switch(this._type){case 0:t=this.noteToFrequency(e);break;case 1:t=this.noteToName(e);break;case 2:t=this.frequencyToNote(e);break;case 3:t=this.nameToNote(e)}this.trigger(t)},setType:function(e){this._type=e}});return s.prototype.Types={NOTE_TO_FREQUENCY:0,NOTE_TO_NAME:1,FREQUENCY_TO_NOTE:2,NAME_TO_NOTE:3},s});