define(["controllers/BaseController"],function(e){var t=function(e,t){return t/e},n=function(e,t){return e/t},r=e.extend({init:function(e){this._super.apply(this,arguments),this._bpm=120,this._tapEnabled=!0,this._notes=[240,180,120,80,90,60,40,45,30,20,22.5,15,10,11.25,7.5,5],this._labels=["1/1","1/2.","1/2","1/2T","1/4.","1/4","1/4T","1/8.","1/8","1/8T","1/16.","1/16","1/16T","1/32.","1/32","1/32T"],this.MS=0,this.HZ=0,this.valuesMS=[],this.valuesHZ=[],this.interval=5,this.taps=[],this.setType(0),this.setInterval(this.interval)},calculate:function(){this.valuesMS=[],this.valuesHZ=[];for(var e=0,r=this._notes.length;e<r;e++)this.valuesMS.push(t(this._bpm,this._notes[e])),this.valuesHZ.push(n(this._bpm,this._notes[e]));return this},setBPM:function(e){return this._bpm=e,this.calculate(),this.setInterval(this.interval),this},setType:function(e){return this.type=e,this},setInterval:function(e){return this.calculate(),this.MS=this.valuesMS[e],this.HZ=this.valuesHZ[e],this.interval=e,this},getBPM:function(){return this._bpm},getSineSpeed:function(){return 2*Math.PI*this.HZ},getTimeTable:function(){return this.valuesMS},getHertzTable:function(){return this.valuesHZ},getTimeValue:function(){return this.MS},getHertzValue:function(){return this.HZ},enableTap:function(){this._tapEnabled=!0},disableTap:function(){this._tapEnabled=!1},tap:function(){var e=0;this.taps.push(this.context.currentTime);if(this.taps.length>1){if(this.taps[this.taps.length-1]-this.taps[this.taps.length-2]>2){this.resetTaps();return}var t=this.taps[this.taps.length-1]-this.taps[0],n=t/60;e=(this.taps.length-1)/n;if(!this._tapEnabled)return e;this.setBPM(Math.round(e))}},resetTaps:function(){this.taps=[],this.taps.push(this.context.currentTime)}});return r.Intervals=r.prototype.Intervals={WHOLE:0,HALF_DOTTED:1,HALF:2,HALF_TRIPLET:3,QUARTER_DOTTED:4,QUARTER:5,QUARTER_TRIPLET:6,EIGHTH_DOTTED:7,EIGHTH:8,EIGHTH_TRIPLET:9,SIXTEENTH_DOTTED:10,SIXTEENTH:11,SIXTEENTH_TRIPLET:12,THIRTYSECONDTH_DOTTED:13,THIRTYSECONDTH:14,THIRTYSECONDTH_TRIPLET:15},r});