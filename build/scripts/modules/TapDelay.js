define("TapDelay",["Delay","Gain","BaseModule"],function(e,t,n){var r=n.extend({init:function(n){this._super();var r,i,s=new t,o=new t;this.taps=n,s.setLabel("TapDelay/Input Gain"),o.setLabel("TapDelay/Output Gain");var u=1/(n+1),a=1-u;this.setLabel(n+" Tap Delay");for(var f=1;f<=n;f++)i=new e(20),i.setLabel("TapDelay/Delay "+f),r=new t,r.setLabel("TapDelay/Gain "+f),r.setGain(a),a-=u,s.connect(i),i.connect(r),r.connect(o),function(e,t,n){e["delay"+f]=t,e["delay"+f+"_gain"]=n}(this.nodes,i,r);this.setDelayTime(1),s.connect(o),this.inputNode=s.getInputNode(),this.outputNode=o.getOutputNode()},setDelayTime:function(e){for(var t=1;t<=this.taps;t++)this.nodes["delay"+t].setTime(e*t)}});return r});