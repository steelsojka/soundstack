define(["modules/BaseModule","components/ScriptNode"],function(e,t){var n=function(e,t,n){return n>=e?n<=t?n:t:e},r=e.extend({init:function(e){this._super.apply(this,arguments),this._amount=1;var n=this,r=new t(this.context,settings.get("bufferSize"),2,2);r.onAudioProcess(function(e){var t=e.inputBuffer.length,r=e.inputBuffer.getChannelData(0),i=e.inputBuffer.getChannelData(1),s=e.outputBuffer.getChannelData(0),o=e.outputBuffer.getChannelData(1);for(var u=0;u<t;u++){var a=r[u]*n._amount,f=i[u]*n._amount;a>=1?s[u]=.5:a<1&&a>=0?s[u]=-0.5*Math.pow(a,2)+a:a<0&&a>-1?s[u]=.5*Math.pow(a,2)+a:s[u]=-0.5,f>=1?o[u]=.5:f<1&&f>=0?o[u]=-0.5*Math.pow(f,2)+f:f<0&&f>-1?o[u]=.5*Math.pow(f,2)+f:o[u]=-0.5}}),this.connectToInput(r).connectToOutput(r),this.nodes.clipper=r,this.setType(0)},setAmount:function(e){this._amount=n(1,1e3,e)},setType:function(e){this._type=e}});return r});