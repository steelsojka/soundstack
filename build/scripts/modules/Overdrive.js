define(["components/Gain","components/WaveShaper","components/Filter","modules/BaseModule"],function(e,t,n,r){Math.tanh=function(e){return(Math.exp(e)-Math.exp(-e))/(Math.exp(e)+Math.exp(-e))};var i=function(e){var t=22050,n=new Float32Array(t),r=2*e/(1-e);for(var i=0;i<t;i+=1){var s=(i-0)*2/(t-0)+ -1;n[i]=(1+r)*s/(1+r*Math.abs(s))}return n},s=r.extend({init:function(r){this._super.apply(this,arguments),this.setLabel("Overdrive");var i=this.nodes.tone=new n(this.context),s=this.nodes.drive=new t(this.context),o=this.nodes.gain=new e(this.context);this.setParameters({tone:i.getParameters(),drive:s.getParameters(),gain:o.getParameters()}),i.setType(i.Types.LOWPASS),s.connect(i),i.connect(o),this.connectToInput(s),this.connectToOutput(o)},setDrive:function(e){this.nodes.drive.setCurve(i(e))},setTone:function(e){this.nodes.tone.setFrequency(1e3+parseInt(e))},setGain:function(e){this.nodes.gain.setGain(e)}});return s});